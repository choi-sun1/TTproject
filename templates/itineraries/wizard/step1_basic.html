{% extends 'base.html' %}

{% block content %}
<div class="wizard-container">
    <div class="wizard-progress">
        <div class="progress-step active">1. 기본정보</div>
        <div class="progress-step">2. 장소선택</div>
        <div class="progress-step">3. 일정배치</div>
        <div class="progress-step">4. 상세설정</div>
    </div>

    <form id="basicInfoForm" class="wizard-form">
        {% csrf_token %}
        <div class="form-group">
            <label for="title">여행 제목</label>
            <input type="text" id="title" name="title" class="form-control" required>
        </div>

        <div class="form-group">
            <label for="start_date">시작일</label>
            <input type="date" id="start_date" name="start_date" class="form-control" required>
        </div>

        <div class="form-group">
            <label for="end_date">종료일</label>
            <input type="date" id="end_date" name="end_date" class="form-control" required>
        </div>

        <button type="submit" class="btn btn-primary">다음 단계</button>
    </form>
</div>

<script>
document.getElementById('basicInfoForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    fetch('{% url "itineraries:wizard-step" step=1 %}', {
        method: 'POST',
        body: formData,
        headers: {
            'X-CSRFToken': getCookie('csrftoken')
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.next_step) {
            window.location.href = `{% url "itineraries:wizard-step" step=2 %}`;
        }
    });
});
</script>
{% endblock %}
