{% extends 'base.html' %}
{% load static %}

{% block title %}상세 설정 - AI 일정 만들기{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/wizard.css' %}">
{% endblock %}

{% block content %}
<div class="wizard-container">
    <div class="wizard-progress">
        <div class="progress-step complete">1. 기본정보</div>
        <div class="progress-step complete">2. 장소선택</div>
        <div class="progress-step complete">3. 일정배치</div>
        <div class="progress-step active">4. 상세설정</div>
    </div>

    <form id="detailsForm" class="details-form" method="POST" action="{% url 'itineraries:wizard_step4' %}">
        {% csrf_token %}
        
        <!-- 예산 설정 섹션 -->
        <div class="form-section">
            <div class="section-header">
                <i class="fas fa-wallet"></i>
                <h3>예산 설정</h3>
            </div>
            <div class="budget-container">
                <!-- 교통비 -->
                <div class="budget-item">
                    <label>교통비</label>
                    <div class="budget-input">
                        <input type="number" name="transport_budget" 
                               class="form-control" placeholder="0" min="0"
                               onchange="calculateTotal()">
                    </div>
                </div>
                <!-- 숙박비 -->
                <div class="budget-item">
                    <label>숙박비</label>
                    <div class="budget-input">
                        <input type="number" name="accommodation_budget" 
                               class="form-control" placeholder="0" min="0"
                               onchange="calculateTotal()">
                    </div>
                </div>
                <!-- 식비 -->
                <div class="budget-item">
                    <label>식비</label>
                    <div class="budget-input">
                        <input type="number" name="food_budget" 
                               class="form-control" placeholder="0" min="0"
                               onchange="calculateTotal()">
                    </div>
                </div>
                <!-- 기타 비용 -->
                <div class="budget-item">
                    <label>기타 비용</label>
                    <div class="budget-input">
                        <input type="number" name="extra_budget" 
                               class="form-control" placeholder="0" min="0"
                               onchange="calculateTotal()">
                    </div>
                </div>
            </div>
            <div class="budget-summary">
                <h4>총 예산: <span id="totalBudget">0</span>원</h4>
            </div>
        </div>

        <!-- 체크리스트 섹션 -->
        <div class="form-section">
            <div class="section-header">
                <i class="fas fa-tasks"></i>
                <h3>준비물 체크리스트</h3>
            </div>
            <div id="checklistContainer">
                <!-- 기본 체크리스트 아이템들 -->
            </div>
            <button type="button" class="btn-secondary" onclick="addChecklistItem()">
                <i class="fas fa-plus"></i> 항목 추가
            </button>
        </div>

        <!-- 공개 설정 섹션 -->
        <div class="form-section">
            <div class="section-header">
                <i class="fas fa-globe"></i>
                <h3>공개 설정</h3>
            </div>
            <div class="visibility-toggle">
                <label class="switch">
                    <input type="checkbox" name="is_public" checked>
                    <span class="slider"></span>
                </label>
                <div class="visibility-info">
                    <h4>일정 공개</h4>
                    <p class="help-text">다른 사용자들이 내 일정을 볼 수 있습니다.</p>
                </div>
            </div>
        </div>

        <!-- 메모 섹션 -->
        <div class="form-section">
            <div class="section-header">
                <i class="fas fa-sticky-note"></i>
                <h3>메모</h3>
            </div>
            <textarea name="notes" class="form-control" rows="4"
                      placeholder="여행과 관련된 메모를 자유롭게 작성하세요."></textarea>
        </div>

        <div class="wizard-actions">
            <a href="{% url 'itineraries:wizard_step3' %}" class="btn-back">
                <i class="fas fa-arrow-left"></i> 이전
            </a>
            <button type="button" id="submitBtn" class="btn-next">  <!-- type="submit"에서 "button"으로 변경 -->
                일정 만들기 <i class="fas fa-check"></i>
            </button>
        </div>
    </form>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/wizard/step4.js' %}"></script>
{% endblock %}
