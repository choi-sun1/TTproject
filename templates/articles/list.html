{% extends 'base.html' %}
{% load static %}

{% block title %}여행 이야기 - SmartTrip{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/articles.css' %}">
{% endblock %}

{% block content %}
<div class="articles-container">
    <div class="articles-header">
        <h1>여행 이야기</h1>
        <div class="articles-actions">
            {% if user.is_authenticated %}
            <a href="{% url 'web:articles:create' %}" class="btn btn-primary">글쓰기</a>
            {% endif %}
        </div>
        <div class="articles-filters">
            <select id="sort-select" class="form-select">
                <option value="latest">최신순</option>
                <option value="popular">인기순</option>
                <option value="views">조회순</option>
            </select>
            <input type="text" id="search-input" class="form-input" placeholder="검색어를 입력하세요">
        </div>
    </div>

    <div class="articles-grid" id="articles-container">
        {% for article in articles %}
        <article class="article-card">
            {% if article.image %}
            <div class="article-image">
                <img src="{{ article.image.url }}" alt="{{ article.title }}">
            </div>
            {% endif %}
            <div class="article-content">
                <h3><a href="{% url 'web:articles:detail' article.pk %}">{{ article.title }}</a></h3>
                <div class="article-meta">
                    <span class="author">{{ article.author.nickname }}</span>
                    <span class="date">{{ article.created_at|date:"Y.m.d" }}</span>
                    <span class="views">조회 {{ article.views }}</span>
                    <span class="likes">좋아요 {{ article.likes.count }}</span>
                </div>
                <p class="article-excerpt">{{ article.content|truncatewords:30 }}</p>
                {% if article.tags.all %}
                <div class="article-tags">
                    {% for tag in article.tags.all %}
                    <span class="tag">{{ tag.name }}</span>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
        </article>
        {% empty %}
        <div class="no-articles">
            <p>아직 게시글이 없습니다.</p>
        </div>
        {% endfor %}
    </div>

    {% include 'includes/pagination.html' %}
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/articles.js' %}"></script>
{% endblock %}
