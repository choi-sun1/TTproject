## ğŸ“– ëª©ì°¨

1. [âœ¨ í”„ë¡œì íŠ¸ ì†Œê°œ](#-í”„ë¡œì íŠ¸-ì†Œê°œ)
2. [ğŸ¥³ íŒ€ì†Œê°œ](#-íŒ€-ì†Œê°œ)
3. [ğŸ”® ì£¼ìš”ê¸°ëŠ¥](#-ì£¼ìš”ê¸°ëŠ¥)
4. [ğŸ“šï¸ ê¸°ìˆ ìŠ¤íƒ](#ï¸-ê¸°ìˆ ìŠ¤íƒ)
5. [ğŸ’­ ê¸°ìˆ ì  ì˜ì‚¬ ê²°ì •](#-ê¸°ìˆ ì -ì˜ì‚¬-ê²°ì •)
6. [ğŸŒ Architecture](#-architecture)
7. [ğŸ—‚ ERD](#-erd)
8. [ğŸš¨ Trouble Shooting](#-trouble-shooting)

## âœ¨ í”„ë¡œì íŠ¸ ì†Œê°œ
###  SmartTrip - ë˜‘ë˜‘í•œ ì—¬í–‰ AI
![](https://blog.kakaocdn.net/dn/MVDYp/btsL11Tv1zv/3TuYD9yiPKyrNTH94beA9K/img.gif)
> **ì—¬í–‰ ë¦¬ë·°ë¥¼ ì‘ì„±**í•˜ì—¬ ì‚¬ìš©ìë¼ë¦¬ ì—¬í–‰ ì¼ì •ê³¼ ì •ë³´ë¥¼ ê³µìœ í•˜ê³ ,
> **AI ì™€ì˜ ëŒ€í™”**ë¥¼ í†µí•´ì„œ **ì—¬í–‰ ì¼ì •ì„ ë” ê°„í¸í•˜ê²Œ ê³„íš** í•  ìˆ˜ ìˆê²Œ ë•ëŠ” ì„œë¹„ìŠ¤


## ğŸ¥³ íŒ€ ì†Œê°œ
- **íŒ€ëª… : T.T (Traveler Tip)**

| ğŸ‘‘Â ë¦¬ë” | ğŸ‘‘Â ë¶€ ë¦¬ë” | âœ¨Â íŒ€ì› | âœ¨Â íŒ€ì› |
| --- | --- | --- | --- |
| ì •ìš©ì„  | ìµœí•´ì°¬ | ì°¨ì•„ì¸ | ì´ìœ ë¦¼ |
|[@Dawol2205](https://github.com/Dawol2205)|[@choi-sun1](https://github.com/choi-sun1)|[@nyum76]()|[@createmycode](https://github.com/createmycode)|

#### ğŸ“Œ [SA ë¬¸ì„œ ë³´ê¸°](https://teamsparta.notion.site/T-T-SA-v1-80b1b36366234f1d936d21b152bd4f86)


#### ğŸ§‘â€ğŸ’» ê°œë°œê¸°ê°„
- `2024.12.30(ëª©)` ~ `2025.01.31(ê¸ˆ)`

## ğŸ”® ì£¼ìš”ê¸°ëŠ¥
### ğŸ§‘â€ğŸ’» íšŒì›ê¸°ëŠ¥
<details>
<summary><b>íšŒì›ê°€ì…</b></summary>
<div markdown="1">

![íšŒì›ê°€ì…](https://blog.kakaocdn.net/dn/nEaAy/btsL2eZh13g/ququv8mrbukldzCMxBVdWk/img.gif)

</div>
</details>

<details>
<summary><b>ë¡œê·¸ì¸</b></summary>
<div markdown="1">

![ë¡œê·¸ì¸](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FMb7y2%2FbtsL3Pddhf1%2FnGSmciw2lJlYQSlLKhOHbk%2Fimg.png)

</div>
</details>

<details>
<summary><b>ë¡œê·¸ì•„ì›ƒ</b></summary>
<div markdown="1">

ì˜¤ë¥¸ìª½ ìœ„ í”„ë¡œí•„ í•œ ë²ˆ ëˆ„ë¥´ê³  ë¡œê·¸ì•„ì›ƒ
![ë¡œê·¸ì•„ì›ƒ](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fdb4piY%2FbtsL26fx1SM%2FSkXJ92Px1reViZAywvhmh0%2Fimg.png)

</div>
</details>


<details>
<summary><b>í”„ë¡œí•„ ì¡°íšŒ</b></summary>
<div markdown="1">

![í”„ë¡œí•„ ì¡°íšŒ](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fb68miH%2FbtsL4qYkujC%2Fu8xlVvZSM98OYix0l8wYeK%2Fimg.png)

</div>
</details>

<details>
<summary><b>íšŒì› ì •ë³´ ìˆ˜ì • ê¸°ëŠ¥</b></summary>
<div markdown="1">

![íšŒì› ì •ë³´ ìˆ˜ì •](https://blog.kakaocdn.net/dn/m9Pjq/btsL3qxWM1m/I9N1W6tHk6JEPpkeOCkwE1/img.gif)

</div>
</details>


### ğŸ¤– ì±—ë´‡ ê¸°ëŠ¥
<details>
<summary><b>streaming ëŒ€í™” ê¸°ëŠ¥</b></summary>
<div markdown="1">

![ëŒ€í™” ê¸°ëŠ¥](https://blog.kakaocdn.net/dn/cuxZ4M/btsL3mJeZOv/sriFSRYPLQEFK4g8GFm0L0/img.gif)

</div>
</details>

<details>
<summary><b>ì´ì „ ëŒ€í™”ë³´ê¸°</b></summary>
<div markdown="1">

![ì±—ë´‡ ê¸°ëŠ¥](https://blog.kakaocdn.net/dn/baTCTx/btsL2A8TBpD/Axnw5Vf65UDC4uj1V52NH0/img.gif)

</div>
</details>

### ğŸ“† ì—¬í–‰ ì¼ì • ê¸°ëŠ¥
<details>
<summary><b>ì—¬í–‰ ì¼ì • ìƒì„±</b></summary>
<div markdown="1">

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FTG5eD%2FbtsL4prACry%2FG5DLeejGE2rxwUB886mNWK%2Fimg.png)

</div>
</details>

<details>
<summary><b>ì—¬í–‰ ì¼ì • ë³´ê¸°</b></summary>
<div markdown="1">

</div>
</details>

### ğŸ¨ ê·¸ ì™¸ ê¸°ëŠ¥

<details>
<summary><b>í™”ë©´ ë‹¤í¬/ë¼ì´íŠ¸ ëª¨ë“œ</b></summary>
<div markdown="1">

![í™”ë©´ ëª¨ë“œ](https://blog.kakaocdn.net/dn/bZxYtm/btsL2aCXu6j/3ht0wz2FXx9OZH2Rzp3kg1/img.gif)

</div>
</details>



## ğŸ“šï¸ ê¸°ìˆ ìŠ¤íƒ

### Frontend & Tools

<div>
    <img src="https://img.shields.io/badge/Python-FFD43B?style=for-the-badge&logo=python&logoColor=blue">
    <img src="https://img.shields.io/badge/CSS3-1572B6?style=for-the-badge&logo=css3&logoColor=white">
    <img src="https://img.shields.io/badge/JavaScript-323330?style=for-the-badge&logo=javascript&logoColor=F7DF1E">
    <img src="https://img.shields.io/badge/Slack-4A154B?style=for-the-badge&logo=slack&logoColor=white">
    <img src="https://img.shields.io/badge/Jira-0052CC?style=for-the-badge&logo=Jira&logoColor=white">
    <img src="https://img.shields.io/badge/Notion-000000?style=for-the-badge&logo=notion&logoColor=white">
    <img src="https://img.shields.io/badge/Django-092E20?style=for-the-badge&logo=django&logoColor=green">
    <img src="https://img.shields.io/badge/GIT-E44C30?style=for-the-badge&logo=git&logoColor=white"/>
    <img src="https://img.shields.io/badge/GitHub-100000?style=for-the-badge&logo=github&logoColor=white">
    <img src="https://img.shields.io/badge/Figma-F24E1E?style=for-the-badge&logo=figma&logoColor=white">
    <img src="https://img.shields.io/badge/Colab-F9AB00?style=for-the-badge&logo=googlecolab&color=525252">
    <img src="https://img.shields.io/badge/Visual_Studio_Code-0078D4?style=for-the-badge&logo=visual%20studio%20code&logoColor=white">
    <img src="https://img.shields.io/badge/ZEP-6758ff?style=for-the-badge&logo=visual%20studio%20code&logoColor=white">
</div>


### âœ”ï¸ Backend & Tools

<div>
    <img src="https://img.shields.io/badge/Python-FFD43B?style=for-the-badge&logo=python&logoColor=blue">
    <img src="https://camo.githubusercontent.com/4c4a57a11a83f99eafb6eaaaaf65ea43e0fc446fccbf8533aac7e9be1067aaf7/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f446a616e676f2d3039324532303f7374796c653d666f722d7468652d6261646765266c6f676f3d446a616e676f266c6f676f436f6c6f723d7768697465">
    <img src="https://img.shields.io/badge/Postman-FF6C37?style=for-the-badge&logo=Postman&logoColor=white">
    <img src="https://img.shields.io/badge/scikit_learn-F7931E?style=for-the-badge&logo=scikit-learn&logoColor=white">
    <img src="https://img.shields.io/badge/ChatGPT-74aa9c?style=for-the-badge&logo=openai&logoColor=white">
    <img src="https://img.shields.io/badge/Slack-4A154B?style=for-the-badge&logo=slack&logoColor=white"/>
    <img src="https://img.shields.io/badge/Jira-0052CC?style=for-the-badge&logo=Jira&logoColor=white">
    <img src="https://img.shields.io/badge/Notion-000000?style=for-the-badge&logo=notion&logoColor=white">
    <img src="https://img.shields.io/badge/GitHub-100000?style=for-the-badge&logo=github&logoColor=white">
    <img src="https://img.shields.io/badge/GIT-E44C30?style=for-the-badge&logo=git&logoColor=white">
    <img src="https://img.shields.io/badge/Colab-F9AB00?style=for-the-badge&logo=googlecolab&color=525252"/>
    <img src="https://img.shields.io/badge/Visual_Studio_Code-0078D4?style=for-the-badge&logo=visual%20studio%20code&logoColor=white">
    <img src="https://img.shields.io/badge/ZEP-6758ff?style=for-the-badge&logo=visual%20studio%20code&logoColor=white">
    <img src="https://img.shields.io/badge/Sqlite-003B57?style=for-the-badge&logo=sqlite&logoColor=white">
    
</div>

### âœ”ï¸ Deploy

<div>
    <img src="https://img.shields.io/badge/AWS_EC2-FF9900?style=for-the-badge&logo=amazonaws&logoColor=white">
</div>

## ğŸ’­ ê¸°ìˆ ì  ì˜ì‚¬ ê²°ì •

<details>
<summary>React vs <b>HTML, CSS, JS</b></summary>
<div markdown="1">

- í”„ë¡œì íŠ¸ê°€ ë¹„êµì  ê°„ë‹¨í•¨.
- ë™ì ì¸ ì¸í„°í˜ì´ìŠ¤ê°€ í¬ê²Œ í•„ìš”í•˜ì§€ ì•ŠìŒ.
- Django í…œí”Œë¦¿ ì—”ì§„ì´ HTML, CSS, JS ì™€ ì™„ë²½íˆ í†µí•©ë˜ì–´ ìˆìŒ.
- ì´ˆê¸° ë¡œë“œê°€ ê°€ë³ê³  ë¹ ë¦„.

ìœ„ì™€ ê°™ì€ ì´ìœ ë¡œ React ë¥¼ í”„ë¡ íŠ¸ì—”ë“œ í”„ë ˆì„ ì›Œí¬ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒ ëŒ€ì‹  HTML, CSS, JS ë¥¼ ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì •í•¨.

</div>
</details>

<details>
<summary>NAVER Maps API, Kakao Maps API vs <b>Google Maps Places API</b></summary>
<div markdown="1">

SmartTripì—ì„œ **ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ, ì‹¤ì‹œê°„ ë°ì´í„° ì œê³µ, ìœ„ì¹˜ ê¸°ë°˜ ë§ì¶¤ ì¶”ì²œ**ì„ êµ¬í˜„í•˜ëŠ” ë° Google Maps APIê°€ ë” ì í•©í•œ ê²ƒ ê°™ì•„ì„œ ì„ íƒí•¨.

- Places APIë¥¼ ì‚¬ìš©í•´ ì‚¬ìš©ì ìœ„ì¹˜ ê¸°ë°˜ìœ¼ë¡œ ì¸ê¸° ì¥ì†Œ ì¶”ì²œ
- ìˆ™ë°• ì¡°ê±´(ì˜ˆ: ê°€ê²©, í¸ì˜ ì‹œì„¤ ë“±)ì— ë”°ë¼ ì‚¬ìš©ì ë§ì¶¤í˜• ìˆ™ì†Œ ì¶”ì²œ
- íŠ¹ì • ì§€ì—­ê³¼ ë‚ ì§œì— ì—´ë¦¬ëŠ” ì¶•ì œ ì •ë³´ë¥¼ ì‚¬ìš©ìì—ê²Œ ì•ˆë‚´
- ê³µì‹ë¬¸ì„œì— ë ˆí¼ëŸ°ìŠ¤ê°€ ê°€ì¥ ì˜ ì •ë¦¬ë˜ìˆê³ , ì¥ì†Œ ë³„ ë¦¬ë·°ê°€ ê°€ì¥ ë§ìŒ.

</div>
</details>

<details>
<summary>MySQL vs <b>SQLite3</b></summary>
<div markdown="1">

ì´ˆë°˜ì—ëŠ” MySQL ë¡œ `settings.py` ë„ ì„¤ì •í•˜ê³  migrate ë„ ì§„í–‰í•´ ë³´ì•˜ì§€ë§Œ, MySQL ì´ ë‹¤ì¤‘ ì‚¬ìš©ì í™˜ê²½ì—ì„œ ì„±ëŠ¥ì´ ë” ìš°ìˆ˜í•˜ê³  ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ì— ì¢‹ì§€ë§Œ ê·¸ë§Œí¼ ë³µì¡í•˜ê³   ì„¤ì •ì´ ë§¤ìš° ë²ˆê±°ë¡œì›Œì„œ ì•„ë˜ì™€ ê°™ì€ ì´ìœ ë¡œ SQLite3 ë¡œ ë³€ê²½í•¨.

- ì›í™œí•œ ë°ì´í„° ê³µìœ 
- SQL ì„œë²„ ì„¤ì • ë”°ë¡œ í•„ìš”ì—†ìŒ.
- íŒ¨í‚¤ì§€ ì„¤ì¹˜ë¡œ ì‰½ê²Œ ì„¤ì¹˜
- í…ŒìŠ¤íŠ¸ìš© ë°ì´í„° ì…ë ¥ ì‰¬ì›€.

</div>
</details>


## ğŸŒ Architecture

![Architecture](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FRlUBs%2FbtsL4a2l7mo%2FK1VVuknLl0w4KiTaEhhBkK%2Fimg.png)



## ğŸ—‚ ERD

![ERD](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2F5a2lG%2FbtsL3hOM2xG%2F2txVf3SkK8hQSJwuk5bGW0%2Fimg.png)




## ğŸš¨ Trouble Shooting

### ğŸŒ FE

<details>
<summary><b>ë¡œê·¸ì¸ í›„ í”„ë¡œí•„ ì‚¬ì§„ ì‚¬ì´ì¦ˆ ì¡°ì ˆë¬¸ì œ</b></summary>
<div markdown="1">



#### ì›ì¸

ì´ˆê¸°ì— ì—…ë¡œë“œí•œ í”„ë¡œí•„ ì´ë¯¸ì§€ ì‚¬ì´ì¦ˆ ì§€ì •ì„ í•˜ì§€ì•ŠìŒ
___

#### í•´ê²°
[ 1ï¸âƒ£ ] í¬ë¡¬ ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ë¡œ í•´ë‹¹ ìœ„ì¹˜ì˜ CSSì½”ë“œ íŒŒì¼ í™•ì¸ í›„ í•´ë‹¹ ì½”ë“œë¥¼ ì°¾ê³  ì‚¬ì´ì¦ˆ ì¡°ì ˆ ì™„ë£Œ

</div>
</details>

<details>
<summary><b>ì±—ë´‡ - í™”ë©´ìƒì— ì¤„ë°”ê¿ˆ ì ìš©ì´ ì•ˆ ë˜ëŠ” ë¬¸ì œ</b></summary>
<div markdown="1">


#### ì›ì¸

ì±—ë´‡ ì‘ë‹µ ìƒì„±ì‹œ streaming ê¸°ëŠ¥ì„ ì ìš©ì‹œí‚¤ë‹¤ê°€ ìƒì„±í•˜ëŠ” í† í°ë§ˆë‹¤ ë‹¨ì„ ë°”ê¾¼ë‹¤ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ê³ 

ë©”ì‹œì§€ê°€ ì—¬ëŸ¬ ì¤„ë¡œ ì…ë ¥ë˜ì–´ë„ HTMLì—ì„œ í•œ ì¤„ë¡œ ì¶œë ¥ë˜ë„ë¡ í•´ë²„ë ¸ë˜ ê²ƒì´ ë¬¸ì œì˜€ìŒ.
___

#### í•´ê²°
**â—ï¸ chat.html ì„ ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •í•¨**

[ 1ï¸âƒ£ ] CSSìˆ˜ì • - `.chat-message.user`, `.chat-message.bot` í´ë˜ìŠ¤ì— `white-space: pre-wrap;` ì†ì„±ì„ ì¶”ê°€í•˜ì—¬, HTML ë‚´ì—ì„œ ì¤„ ë°”ê¿ˆì´ ìœ ì§€ë˜ë„ë¡ ì„¤ì •

[ 2ï¸âƒ£ ] Django í…œí”Œë¦¿ í•„í„°ì¸ `{{ conversation.user_message|linebreaksbr }}`ì™€ `{{ conversation.bot_reply|linebreaksbr }}`ë¥¼ ì‚¬ìš©í•´ í…ìŠ¤íŠ¸ ë‚´ì˜ ì¤„ ë°”ê¿ˆ `(\n)`ì„ HTMLì˜ `<br>` íƒœê·¸ë¡œ ë³€í™˜

[ 3ï¸âƒ£ ] `userMessage.replace(/\n/g, "<br>")`ë¡œ ì‚¬ìš©ìì˜ ì…ë ¥ì—ì„œ ì¤„ ë°”ê¿ˆì„ `<br>` ë¡œ ë³€í™˜

</div>
</details>

### ğŸŒš BE

<details>
<summary><b>MySQLì— ì ‘ì†ì‹œ Access Denied ì˜¤ë¥˜ ë°œìƒ</b></summary>
<div markdown="1">



#### ì›ì¸

ë‹¤ìš´ í´ë”ì— ê¸°ì¡´ì— ë‹¤ìš´ë°›ì€ ê²ƒê³¼ ì¶©ëŒì´ ì¼ì–´ë‚˜ MySQL ì ‘ì†ì´ ë¶ˆê°€ëŠ¥
___

#### í•´ê²°

[ 1ï¸âƒ£ ] ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ ì°¨ë¡€ë¡œ ì…ë ¥í•´ ëª¨ë‘ ì‚­ì œ
- `sudo brew services stop mysql`

- `brew uninstall mysql`

- `rm -rf /opt/homebrew/var/mysql`

- `brew install mysql`


[ 2ï¸âƒ£ ] ì¬ì„¤ì¹˜

`brew install mysql`
</div>
</details>

<details>
<summary><b>migrate í•˜ë©´ ë°œìƒí–ˆë˜ 1824 ì—ëŸ¬</b></summary>
<div markdown="1">

#### ì›ì¸
ë‚´ ë¸Œëœì¹˜ì—ì„œ í…ŒìŠ¤íŠ¸ í–ˆë˜ DB ì™€ íŒ€ì› ë¸Œëœì¹˜ì˜ DB ë‚´ìš©ì´ ë‹¬ë¼ì„œ
- `python manage.py makemigrations`
- `python manage.py migrate`

ìœ„ ëª…ë ¹ì–´ ì…ë ¥í•˜ë©´ ë°œìƒí•¨

---

#### í•´ê²°
ê° ì•± ë³„ë¡œ ë”°ë¡œë”°ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì§„í–‰
```zsh
# accounts ì•±ì— ëŒ€í•œ migrate
python manage.py makemigrations accounts

python manage.py migrate accounts

# ìœ„ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ë‹¤ë¥¸ ì•± ëª¨ë‘ migrate
```

</div>
</details>


<details>
<summary><b>ì±—ë´‡ - ëŒ€í™” ìƒíƒœ ê´€ë¦¬ ì˜¤ë¥˜</b></summary>
<div markdown="1">



#### ì›ì¸

ChatState ëª¨ë¸ì˜ `current_step` ìƒíƒœê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šê±°ë‚˜ ëˆ„ë½ë˜ì–´ ëŒ€í™” íë¦„ì´ ëŠì–´ì§.
___

#### í•´ê²°
[ 1ï¸âƒ£ ] ChatState.objects.get_or_create() ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìë³„ ì´ˆê¸° ìƒíƒœë¥¼ í•­ìƒ ìƒì„±í•˜ë„ë¡ ì„¤ì •

[ 2ï¸âƒ£ ] ëŒ€í™” ë‹¨ê³„ ì „í™˜ ë¡œì§ì„ ëª…í™•íˆ ë¶„ë¦¬í•˜ê³ , ìƒíƒœ ì €ì¥ ì‹œ ì˜ˆìƒì¹˜ ëª»í•œ ë°ì´í„° ì†ì‹¤ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ëª¨ë¸ í•„ë“œ ê²€ì¦ ì¶”ê°€
</div>
</details>

<details>
<summary><b>ì±—ë´‡ - ì´ì „ ëŒ€í™” ë‚´ì—­ í˜•ì‹ì´ ë‹µë³€ ìƒì„±ì‹œì™€ ë‹¤ë¥¸ ë¬¸ì œ</b></summary>
<div markdown="1">


#### ì›ì¸

chatbot ì•±ì˜ `views.py` ì—ì„œ

ì±—ë´‡ì´ markdown ìœ¼ë¡œ ì¶œë ¥í•˜ì§€ ë§ë¼ëŠ” prompt ì˜ ë‚´ìš©ì„ ë¬´ì‹œí•´ì„œ ì´ ë¶€ë¶„ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ë§Œë“  `remove_markdown()` ì´ë¼ëŠ” í•¨ìˆ˜ê°€

ì¶œë ¥ì‹œì—ëŠ” ì ìš©ë˜ì§€ ì•ŠëŠ”ë°, DB ì— ì €ì¥ë  ë•Œì—ë§Œ `clean_reply` ë³€ìˆ˜ë¥¼ í†µí•´ ì €ì¥ì´ ë˜ëŠ” ê²ƒì´ì—ˆìŒ.
___

#### í•´ê²°
[ 1ï¸âƒ£ ] ë§ˆí¬ë‹¤ìš´ ë¬¸ë²• ì¶œë ¥ ë¬¸ì œëŠ” í”„ë¡¬í”„íŒ…ìœ¼ë¡œ ì˜ í•´ê²° ë˜ì—ˆìœ¼ë¯€ë¡œ, `remove_markdown` í•¨ìˆ˜ì™€ ì´ì™€ ê´€ë ¨ëœ ë¶€ë¶„ ì£¼ì„ ì²˜ë¦¬

```py
from django.shortcuts import render, redirect
from django.contrib.auth.decorators import login_required
from django.conf import settings
from openai import OpenAI
from .models import Conversation
from .forms import ChatForm
from django.http import StreamingHttpResponse
import time
import re

CLIENT = OpenAI(api_key=settings.OPENAI_API_KEY)

# def remove_markdown(text):
#     text = re.sub(r'\*\*(.*?)\*\*', r'\1', text)
#     text = re.sub(r'\*(.*?)\*', r'\1', text)
#     text = re.sub(r'`(.*?)`', r'\1', text)
#     text = re.sub(r'#+\s', '', text)
#     text = re.sub(r'(\n- |\n\*)', '\n', text)
#     text = text.replace('â€¢', '')
#     text = re.sub(r'(\d+\.\s)', '', text)
#     text = re.sub(r'\n\s*\n', '\n', text)
#     return text.strip()

@login_required
def chat_view(request):
    if request.method == 'GET':
        show_history = request.GET.get('show_history', 'false') == 'true'
        conversations = Conversation.objects.filter(user=request.user).order_by('timestamp') if show_history else []
        return render(request, 'chatbot/chat.html', {'conversations': conversations, 'form': ChatForm(), 'show_history': show_history})

    prompt = '''
    ì‘ë‹µì„ ë°˜ë“œì‹œ **ì¼ë°˜ í…ìŠ¤íŠ¸ í˜•ì‹**ìœ¼ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.

    1. ë¬¸ì¥ì„ **ì¤„ê¸€ë¡œ ì´ì–´ì“°ì§€ ë§ê³ , ë¬¸ë‹¨ ë‹¨ìœ„ë¡œ êµ¬ë¶„í•˜ì„¸ìš”.**  
    2. ê° ë¬¸ë‹¨ ì‚¬ì´ì— **í•œ ì¤„(`\n`)ì˜ ë¹ˆ ì¤„ì„ ì¶”ê°€í•˜ì„¸ìš”.**
    3. ë¬¸ì¥ì€ ì™„ì „í•œ í˜•íƒœë¡œ ì‘ì„±í•˜ê³ , ë¬¸ë‹¨ì„ **ì§§ê³  ê°„ê²°í•˜ê²Œ ìœ ì§€í•˜ì„¸ìš”.**
    4. í…ìŠ¤íŠ¸ë§Œ ì‚¬ìš©í•˜ê³ , ë§ˆí¬ë‹¤ìš´ì„ **ì ˆëŒ€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”.**

    ì˜ˆì œ:
    ---
    ì‚¬ìš©ì: ì„œìš¸ 2ë°• 3ì¼ ì—¬í–‰ ì¼ì •ì„ ì¶”ì²œí•´ì¤˜.
    AI:
    ê°•ë¦‰ì—ì„œì˜ 1ë°• 2ì¼ ì—¬í–‰ì€ ì •ë§ ë©‹ì§„ ì„ íƒì´ì—ìš”!

ì²«ì§¸ ë‚  ì¼ì •ì„ ì¶”ì²œí•´ë³¼ê²Œìš”:

ì˜¤ì „: ë„ì°© ë° ì¹´í˜ íƒë°©
- ì•„ì¹¨ì— ê°•ë¦‰ì— ë„ì°©í•œ í›„, ìœ ëª…í•œ ì»¤í”¼ ëª…ì†Œì¸ â€˜ê°•ë¦‰ì»¤í”¼ê±°ë¦¬â€™ë¥¼ ë°©ë¬¸í•´ë³´ì„¸ìš”.
- ë‹¤ì–‘í•œ ì¹´í˜ì—ì„œ ì»¤í”¼ë¥¼ ì¦ê¸°ë©° ë°”ë‹¤ê°€ ë³´ì´ëŠ” ë©‹ì§„ ê²½ì¹˜ë¥¼ ê°ìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì ì‹¬: ì§€ì—­ ë§›ì§‘
- â€˜ì´ˆë‹¹ìˆœë‘ë¶€â€™ë‚˜ â€˜ê°•ë¦‰íšŒì„¼í„°â€™ ê°™ì€ ì§€ì—­ ë§›ì§‘ì—ì„œ ì ì‹¬ì„ ë¨¹ì–´ë³´ì„¸ìš”.
- ì‹ ì„ í•œ í•´ì‚°ë¬¼ì´ë‚˜ ìˆœë‘ë¶€ ìš”ë¦¬ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤.

ì˜¤í›„: ê²½í¬ëŒ€ ë° í•´ë³€ ì‚°ì±…
- ì ì‹¬ í›„ ê²½í¬ëŒ€ë¡œ ì´ë™í•´ë³´ì„¸ìš”.
- ê²½í¬ëŒ€ì—ì„œ ë°”ë‹¤ë¥¼ ë°”ë¼ë³´ë©° ì‚°ì±…í•˜ê³ , ì£¼ë³€ ì‚¬ì§„ë„ ì°ì–´ë³´ì„¸ìš”.
- ê²½í¬í•´ë³€ì—ì„œ ë°”ë‹¤ì— ë°œì„ ë‹´ê·¸ë©° ì—¬ìœ ë¡œìš´ ì‹œê°„ì„ ê°€ì ¸ë„ ì¢‹ìŠµë‹ˆë‹¤.

ì €ë…: ë°”ë² í í˜¹ì€ í•´ì‚°ë¬¼ ìš”ë¦¬
- ìˆ™ì†Œì—ì„œ ë°”ë² íë¥¼ ì¦ê¸¸ ìˆ˜ë„ ìˆê³ , â€˜ì†ì´ˆ ìˆ˜ì‚°ì‹œì¥â€™ì— ê°€ì„œ ì‹ ì„ í•œ í•´ì‚°ë¬¼ì„ ì¦ê¸°ëŠ” ê²ƒë„ ì¢‹ìŠµë‹ˆë‹¤.

ë°¤: í•´ë³€ ì‚°ì±… ë˜ëŠ” íœ´ì‹
- ì €ë… ì‹ì‚¬ í›„ì—ëŠ” í•´ë³€ì„ ë”°ë¼ ì‚°ì±…í•˜ë©° ì¼ëª°ì„ ê°ìƒí•´ë³´ì„¸ìš”.
- ìˆ™ì†Œì—ì„œ ììœ ë¡­ê²Œ íœ´ì‹ì„ ì·¨í•˜ëŠ” ê²ƒë„ ì¢‹ì€ ì„ íƒì´ì—ìš”.

ë‘˜ì§¸ ë‚  ì¼ì •ì„ ì œì•ˆí•´ë“œë¦´ê²Œìš”:

ì˜¤ì „: ì•ˆëª©í•´ë³€ ì¹´í˜ íƒë°©
- ì•„ì¹¨ ì‹ì‚¬ í›„ ì•ˆëª©í•´ë³€ìœ¼ë¡œ ì´ë™í•´ ê·¼ì²˜ì˜ ì¹´í˜ì—ì„œ ì•„ì¹¨ ì»¤í”¼ì™€ ê°„ë‹¨í•œ ì•„ì¹¨ì„ ì¦ê¸°ì„¸ìš”.
- í•´ì•ˆì„  ë”°ë¼ ê±·ëŠ” ê²ƒë„ ì¢‹ì€ ì•„ì¹¨ ì‚°ì±…ì´ ë©ë‹ˆë‹¤.

ì˜¤í›„: ëª…ì†Œ ë°©ë¬¸ ë° ëŒì•„ê°€ê¸°
- â€˜ì„ êµì¥â€™ì´ë‚˜ â€˜ì˜¤ì£½í—Œâ€™ì„ ë°©ë¬¸í•´ ì „í†µì ì¸ í•œêµ­ì˜ ëª¨ìŠµì„ ëŠê»´ë³´ì„¸ìš”.
- ê°•ë¦‰ì˜ ì—­ì‚¬ì™€ ë¬¸í™”ë¥¼ ì²´í—˜í•  ìˆ˜ ìˆëŠ” ì¢‹ì€ ê¸°íšŒê°€ ë  ê²ƒì…ë‹ˆë‹¤.

ì´í›„ ì—¬í–‰ì„ ë§ˆì¹˜ê³  ëŒì•„ê°€ëŠ” ì¼ì •ìœ¼ë¡œ ê³„íší•˜ë©´ ì¢‹ê² ë„¤ìš”. í•„ìš”ì— ë”°ë¼ ì¼ì • ìˆ˜ì •ë„ ê°€ëŠ¥í•˜ë‹ˆ ì–¸ì œë“ ì§€ ë§ì”€í•´ ì£¼ì„¸ìš”!
    ---

    ìœ„ ì˜ˆì œì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ë‹µë³€í•˜ì„¸ìš”.
    '''

    if request.method == 'POST':
        user = request.user
        form = ChatForm(request.POST)
        if form.is_valid():
            user_message = form.cleaned_data["user_message"]

            def generate_response():
                stream = CLIENT.chat.completions.create(
                    model="gpt-4o",
                    stream=True,
                    messages=[
                        {"role": "system", "content": prompt},
                        {"role": "user", "content": user_message}
                    ]
                )

                bot_reply = ""

                for chunk in stream:
                    if hasattr(chunk, "choices") and chunk.choices:
                        delta = chunk.choices[0].delta
                        if hasattr(delta, "content") and delta.content:
                            text = delta.content
                            bot_reply += text
                            yield text.replace('\n', '<br>')
                            time.sleep(0.05)

        #        clean_reply = remove_markdown(bot_reply)

                Conversation.objects.create(
                    user=user,
                    user_message=user_message,
                    bot_reply=bot_reply # í˜„ì¬ ëŒ€í™” ë‚´ìš©ê³¼ DB ì— ì €ì¥ë˜ëŠ” ì´ì „ ëŒ€í™” ë‚´ìš©ì„ ê°™ê²Œ í•˜ê¸° ìœ„í•´ clean_reply ì‚¬ìš© X
                )

            return StreamingHttpResponse(generate_response(), content_type='text/html')

    return render(request, 'chatbot/chat.html', {'form': ChatForm()})


@login_required
def new_chat(request):
    request.session['new_chat'] = True
    return redirect('chatbot:chat')  # chat_viewë¡œ ë¦¬ë””ë ‰ì…˜
```


</div>
</details>

<details>
<summary><b>JWT ì¸ì¦ ì‹¤íŒ¨ ë¬¸ì œ</b></summary>
<div markdown="1">



#### ì›ì¸

API ìš”ì²­ ì‹œ Authorization í—¤ë”ì— í† í°ì´ ëˆ„ë½ë˜ê±°ë‚˜ ì˜¬ë°”ë¥´ì§€ ì•Šì€ í¬ë§·ìœ¼ë¡œ ì „ë‹¬
___

#### í•´ê²°
[ 1ï¸âƒ£ ] í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìš”ì²­ ì‹œ í—¤ë”ì— `Authorization: Bearer <JWT í† í°>`ì„ ì˜¬ë°”ë¥´ê²Œ í¬í•¨í•˜ë„ë¡ ìˆ˜ì •

[ 2ï¸âƒ£ ] Django REST Framework ì—ì„œ `IsAuthenticated` ê¶Œí•œ í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•˜ê³ , ì¸ì¦ ì‹¤íŒ¨ ì‹œ ì ì ˆí•œ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•˜ë„ë¡ ì˜ˆì™¸ ì²˜ë¦¬ êµ¬í˜„

</div>
</details>
