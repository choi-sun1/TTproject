{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow">
                <div class="card-header bg-white">
                    <h4 class="mb-0">프로필 수정</h4>
                </div>
                <div class="card-body">
                    <form method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <label for="nickname" class="form-label">닉네임</label>
                                <input type="text" class="form-control" id="nickname" name="nickname" value="{{ user.nickname|default:'' }}">
                            </div>
                            <div class="col-md-6">
                                <label for="gender" class="form-label">성별</label>
                                <select class="form-select" id="gender" name="gender">
                                    <option value="">선택하세요</option>
                                    <option value="M" {% if user.gender == 'M' %}selected{% endif %}>남성</option>
                                    <option value="F" {% if user.gender == 'F' %}selected{% endif %}>여성</option>
                                </select>
                            </div>
                        </div>

                        <div class="mb-4">
                            <label for="birth_date" class="form-label">생년월일</label>
                            <input type="date" class="form-control" id="birth_date" name="birth_date" value="{{ user.birth_date|date:'Y-m-d' }}">
                        </div>

                        <div class="mb-4">
                            <label for="bio" class="form-label">자기소개</label>
                            <textarea class="form-control" id="bio" name="bio" rows="4">{{ user.bio|default:'' }}</textarea>
                        </div>

                        <div class="mb-4">
                            <label class="form-label">프로필 이미지</label>
                            {% if user.profile_image %}
                                <div class="mb-2">
                                    <img src="{{ user.profile_image.url }}" alt="현재 프로필 이미지" class="rounded-circle" style="width: 100px; height: 100px; object-fit: cover;">
                                </div>
                            {% endif %}
                            <input type="file" class="form-control" id="profile_image" name="profile_image" accept="image/*">
                        </div>

                        <div class="d-flex gap-3">
                            <button type="button" onclick="location.href='{% url 'accounts:profile' user.username %}'" class="btn btn-outline-primary flex-grow-1">
                                <i class="fas fa-times me-1"></i>취소
                            </button>
                            <button type="submit" class="btn btn-primary flex-grow-1">
                                <i class="fas fa-save me-1"></i>저장하기
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
